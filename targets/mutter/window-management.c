/* window-management.c generated by valac, the Vala compiler
 * generated from window-management.vala, do not modify */

/*
 * Copyright (C) 2009 Canonical Ltd
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Authored by Neil Jagdish Patel <neil.patel@canonical.com>
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <clutter/clutter.h>
#include <mutter-plugins.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <libwnck/libwnck.h>


#define UNITY_TYPE_WINDOW_MANAGEMENT (unity_window_management_get_type ())
#define UNITY_WINDOW_MANAGEMENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), UNITY_TYPE_WINDOW_MANAGEMENT, UnityWindowManagement))
#define UNITY_WINDOW_MANAGEMENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), UNITY_TYPE_WINDOW_MANAGEMENT, UnityWindowManagementClass))
#define UNITY_IS_WINDOW_MANAGEMENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), UNITY_TYPE_WINDOW_MANAGEMENT))
#define UNITY_IS_WINDOW_MANAGEMENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), UNITY_TYPE_WINDOW_MANAGEMENT))
#define UNITY_WINDOW_MANAGEMENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), UNITY_TYPE_WINDOW_MANAGEMENT, UnityWindowManagementClass))

typedef struct _UnityWindowManagement UnityWindowManagement;
typedef struct _UnityWindowManagementClass UnityWindowManagementClass;
typedef struct _UnityWindowManagementPrivate UnityWindowManagementPrivate;

#define UNITY_TYPE_PLUGIN (unity_plugin_get_type ())
#define UNITY_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), UNITY_TYPE_PLUGIN, UnityPlugin))
#define UNITY_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), UNITY_TYPE_PLUGIN, UnityPluginClass))
#define UNITY_IS_PLUGIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), UNITY_TYPE_PLUGIN))
#define UNITY_IS_PLUGIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), UNITY_TYPE_PLUGIN))
#define UNITY_PLUGIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), UNITY_TYPE_PLUGIN, UnityPluginClass))

typedef struct _UnityPlugin UnityPlugin;
typedef struct _UnityPluginClass UnityPluginClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __g_list_free_g_object_unref0(var) ((var == NULL) ? NULL : (var = (_g_list_free_g_object_unref (var), NULL)))

struct _UnityWindowManagement {
	GObject parent_instance;
	UnityWindowManagementPrivate * priv;
};

struct _UnityWindowManagementClass {
	GObjectClass parent_class;
};

struct _UnityWindowManagementPrivate {
	UnityPlugin* plugin;
	GList* switch_windows;
	ClutterGroup* workgroup1;
	ClutterGroup* workgroup2;
	gint switch_signals_to_send;
	MutterWindow* last_mapped;
};


extern char* unity_maximus_user_unmaximize_hint;
static gpointer unity_window_management_parent_class = NULL;

GType unity_window_management_get_type (void);
GType unity_plugin_get_type (void);
#define UNITY_WINDOW_MANAGEMENT_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), UNITY_TYPE_WINDOW_MANAGEMENT, UnityWindowManagementPrivate))
enum  {
	UNITY_WINDOW_MANAGEMENT_DUMMY_PROPERTY
};
static void _g_list_free_g_object_unref (GList* self);
static void unity_window_management_window_minimized (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window);
static void _unity_window_management_window_minimized_unity_plugin_window_minimized (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gpointer self);
static void unity_window_management_window_maximized (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height);
static void _unity_window_management_window_maximized_unity_plugin_window_maximized (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height, gpointer self);
static void unity_window_management_window_unmaximized (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height);
static void _unity_window_management_window_unmaximized_unity_plugin_window_unmaximized (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height, gpointer self);
static void unity_window_management_window_mapped (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window);
static void _unity_window_management_window_mapped_unity_plugin_window_mapped (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gpointer self);
static void unity_window_management_window_destroyed (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window);
static void _unity_window_management_window_destroyed_unity_plugin_window_destroyed (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gpointer self);
static void unity_window_management_window_kill_effect (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window, gulong events);
static void _unity_window_management_window_kill_effect_unity_plugin_window_kill_effect (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gulong events, gpointer self);
static void unity_window_management_workspace_switched (UnityWindowManagement* self, UnityPlugin* plugin, GList* windows, gint from, gint to, gint direction);
static void _unity_window_management_workspace_switched_unity_plugin_workspace_switch_event (UnityPlugin* _sender, UnityPlugin* plugin, GList* windows, gint from, gint to, gint direction, gpointer self);
UnityWindowManagement* unity_window_management_new (UnityPlugin* p);
UnityWindowManagement* unity_window_management_construct (GType object_type, UnityPlugin* p);
static gint unity_window_management_get_animation_speed (UnityWindowManagement* self, MutterWindow* window);
gboolean unity_plugin_get_expose_showing (UnityPlugin* self);
MutterPlugin* unity_plugin_get_plugin (UnityPlugin* self);
static void unity_window_management_on_workspace_switch_completed (UnityWindowManagement* self, ClutterAnimation* anim);
static void _unity_window_management_on_workspace_switch_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self);
static void unity_window_management_window_minimized_completed (UnityWindowManagement* self, ClutterAnimation* anim);
static void _unity_window_management_window_minimized_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self);
static gboolean unity_window_management_force_activate (UnityWindowManagement* self);
static gboolean _unity_window_management_force_activate_gsource_func (gpointer self);
static void unity_window_management_window_mapped_completed (UnityWindowManagement* self, ClutterAnimation* anim);
static void _unity_window_management_window_mapped_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self);
static void unity_window_management_window_destroyed_completed (UnityWindowManagement* self, ClutterAnimation* anim);
static void _unity_window_management_window_destroyed_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self);
static GObject * unity_window_management_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static void unity_window_management_finalize (GObject* obj);



static void _g_list_free_g_object_unref (GList* self) {
	g_list_foreach (self, (GFunc) g_object_unref, NULL);
	g_list_free (self);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


#line 203 "window-management.vala"
static void _unity_window_management_window_minimized_unity_plugin_window_minimized (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gpointer self) {
#line 134 "window-management.c"
	unity_window_management_window_minimized (self, plugin, window);
}


#line 169 "window-management.vala"
static void _unity_window_management_window_maximized_unity_plugin_window_maximized (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height, gpointer self) {
#line 141 "window-management.c"
	unity_window_management_window_maximized (self, plugin, window, x, y, width, height);
}


#line 185 "window-management.vala"
static void _unity_window_management_window_unmaximized_unity_plugin_window_unmaximized (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height, gpointer self) {
#line 148 "window-management.c"
	unity_window_management_window_unmaximized (self, plugin, window, x, y, width, height);
}


#line 267 "window-management.vala"
static void _unity_window_management_window_mapped_unity_plugin_window_mapped (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gpointer self) {
#line 155 "window-management.c"
	unity_window_management_window_mapped (self, plugin, window);
}


#line 334 "window-management.vala"
static void _unity_window_management_window_destroyed_unity_plugin_window_destroyed (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gpointer self) {
#line 162 "window-management.c"
	unity_window_management_window_destroyed (self, plugin, window);
}


#line 365 "window-management.vala"
static void _unity_window_management_window_kill_effect_unity_plugin_window_kill_effect (UnityPlugin* _sender, UnityPlugin* plugin, MutterWindow* window, gulong events, gpointer self) {
#line 169 "window-management.c"
	unity_window_management_window_kill_effect (self, plugin, window, events);
}


#line 58 "window-management.vala"
static void _unity_window_management_workspace_switched_unity_plugin_workspace_switch_event (UnityPlugin* _sender, UnityPlugin* plugin, GList* windows, gint from, gint to, gint direction, gpointer self) {
#line 176 "window-management.c"
	unity_window_management_workspace_switched (self, plugin, windows, from, to, direction);
}


#line 32 "window-management.vala"
UnityWindowManagement* unity_window_management_construct (GType object_type, UnityPlugin* p) {
#line 183 "window-management.c"
	UnityWindowManagement * self;
	UnityPlugin* _tmp0_;
#line 32 "window-management.vala"
	g_return_val_if_fail (p != NULL, NULL);
#line 188 "window-management.c"
	self = g_object_newv (object_type, 0, NULL);
#line 34 "window-management.vala"
	self->priv->plugin = (_tmp0_ = _g_object_ref0 (p), _g_object_unref0 (self->priv->plugin), _tmp0_);
#line 35 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "window-minimized", (GCallback) _unity_window_management_window_minimized_unity_plugin_window_minimized, self, 0);
#line 36 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "window-maximized", (GCallback) _unity_window_management_window_maximized_unity_plugin_window_maximized, self, 0);
#line 37 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "window-unmaximized", (GCallback) _unity_window_management_window_unmaximized_unity_plugin_window_unmaximized, self, 0);
#line 38 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "window-mapped", (GCallback) _unity_window_management_window_mapped_unity_plugin_window_mapped, self, 0);
#line 39 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "window-destroyed", (GCallback) _unity_window_management_window_destroyed_unity_plugin_window_destroyed, self, 0);
#line 40 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "window-kill-effect", (GCallback) _unity_window_management_window_kill_effect_unity_plugin_window_kill_effect, self, 0);
#line 41 "window-management.vala"
	g_signal_connect_object (self->priv->plugin, "workspace-switch-event", (GCallback) _unity_window_management_workspace_switched_unity_plugin_workspace_switch_event, self, 0);
#line 206 "window-management.c"
	return self;
}


#line 32 "window-management.vala"
UnityWindowManagement* unity_window_management_new (UnityPlugin* p) {
#line 32 "window-management.vala"
	return unity_window_management_construct (UNITY_TYPE_WINDOW_MANAGEMENT, p);
#line 215 "window-management.c"
}


#line 48 "window-management.vala"
static gint unity_window_management_get_animation_speed (UnityWindowManagement* self, MutterWindow* window) {
#line 221 "window-management.c"
	gint result = 0;
	gint type;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
#line 48 "window-management.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 48 "window-management.vala"
	g_return_val_if_fail (window != NULL, 0);
#line 50 "window-management.vala"
	type = (gint) mutter_window_get_window_type (window);
#line 51 "window-management.vala"
	if (type == META_COMP_WINDOW_NORMAL) {
#line 51 "window-management.vala"
		_tmp1_ = TRUE;
#line 236 "window-management.c"
	} else {
#line 52 "window-management.vala"
		_tmp1_ = type == META_COMP_WINDOW_DIALOG;
#line 240 "window-management.c"
	}
#line 51 "window-management.vala"
	if (_tmp1_) {
#line 51 "window-management.vala"
		_tmp0_ = TRUE;
#line 246 "window-management.c"
	} else {
#line 53 "window-management.vala"
		_tmp0_ = type == META_COMP_WINDOW_MODAL_DIALOG;
#line 250 "window-management.c"
	}
#line 51 "window-management.vala"
	if (_tmp0_) {
#line 254 "window-management.c"
		result = 200;
#line 54 "window-management.vala"
		return result;
#line 258 "window-management.c"
	}
	result = 80;
#line 55 "window-management.vala"
	return result;
#line 263 "window-management.c"
}


#line 151 "window-management.vala"
static void _unity_window_management_on_workspace_switch_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self) {
#line 269 "window-management.c"
	unity_window_management_on_workspace_switch_completed (self, _sender);
}


#line 58 "window-management.vala"
static void unity_window_management_workspace_switched (UnityWindowManagement* self, UnityPlugin* plugin, GList* windows, gint from, gint to, gint direction) {
#line 276 "window-management.c"
	ClutterActor* stage;
	float x_delta;
	float y_delta;
	ClutterAnimation* anim;
	GList* _tmp1_;
	ClutterGroup* _tmp2_;
	ClutterGroup* _tmp3_;
	ClutterActor* _tmp4_;
	ClutterActor* _tmp5_;
	ClutterGroup* _tmp6_;
	ClutterGroup* _tmp7_;
	ClutterAnimation* _tmp9_;
	float y;
	float x;
	ClutterAnimation* _tmp10_;
#line 58 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 58 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 64 "window-management.vala"
	if (unity_plugin_get_expose_showing (plugin)) {
#line 298 "window-management.c"
		MutterWindow* window;
#line 66 "window-management.vala"
		window = (MutterWindow*) g_list_nth_data (windows, (guint) 0);
#line 67 "window-management.vala"
		mutter_plugin_effect_completed (unity_plugin_get_plugin (plugin), window, (guint) MUTTER_PLUGIN_SWITCH_WORKSPACE);
#line 68 "window-management.vala"
		return;
#line 306 "window-management.c"
	}
#line 71 "window-management.vala"
	self->priv->switch_signals_to_send++;
#line 73 "window-management.vala"
	stage = mutter_plugin_get_stage (unity_plugin_get_plugin (plugin));
#line 74 "window-management.vala"
	x_delta = (float) 0;
#line 75 "window-management.vala"
	y_delta = (float) 0;
#line 76 "window-management.vala"
	anim = NULL;
#line 78 "window-management.vala"
	if (direction == (-4)) {
#line 79 "window-management.vala"
		x_delta = clutter_actor_get_width (stage);
#line 322 "window-management.c"
	} else {
#line 80 "window-management.vala"
		if (direction == (-3)) {
#line 81 "window-management.vala"
			x_delta = -clutter_actor_get_width (stage);
#line 328 "window-management.c"
		} else {
#line 82 "window-management.vala"
			if (direction == (-2)) {
#line 83 "window-management.vala"
				y_delta = clutter_actor_get_height (stage);
#line 334 "window-management.c"
			} else {
#line 84 "window-management.vala"
				if (direction == (-1)) {
#line 85 "window-management.vala"
					y_delta = -clutter_actor_get_height (stage);
#line 340 "window-management.c"
				}
			}
		}
	}
#line 87 "window-management.vala"
	if (self->priv->switch_signals_to_send > 1) {
#line 347 "window-management.c"
		guint _tmp0_;
#line 89 "window-management.vala"
		g_signal_parse_name ("completed", CLUTTER_TYPE_ANIMATION, &_tmp0_, NULL, FALSE);
#line 89 "window-management.vala"
		g_signal_handlers_disconnect_matched (clutter_actor_get_animation ((ClutterActor*) self->priv->workgroup2), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp0_, 0, NULL, (GCallback) _unity_window_management_on_workspace_switch_completed_clutter_animation_completed, self);
#line 90 "window-management.vala"
		unity_window_management_on_workspace_switch_completed (self, NULL);
#line 355 "window-management.c"
	}
#line 93 "window-management.vala"
	self->priv->switch_windows = (_tmp1_ = NULL, __g_list_free_g_object_unref0 (self->priv->switch_windows), _tmp1_);
#line 95 "window-management.vala"
	self->priv->workgroup1 = (_tmp2_ = g_object_ref_sink ((ClutterGroup*) clutter_group_new ()), _g_object_unref0 (self->priv->workgroup1), _tmp2_);
#line 96 "window-management.vala"
	self->priv->workgroup2 = (_tmp3_ = g_object_ref_sink ((ClutterGroup*) clutter_group_new ()), _g_object_unref0 (self->priv->workgroup2), _tmp3_);
#line 98 "window-management.vala"
	clutter_container_add_actor ((_tmp4_ = mutter_plugin_get_window_group (unity_plugin_get_plugin (plugin)), CLUTTER_IS_CONTAINER (_tmp4_) ? ((ClutterContainer*) _tmp4_) : NULL), (ClutterActor*) self->priv->workgroup1);
#line 99 "window-management.vala"
	clutter_container_add_actor ((_tmp5_ = mutter_plugin_get_window_group (unity_plugin_get_plugin (plugin)), CLUTTER_IS_CONTAINER (_tmp5_) ? ((ClutterContainer*) _tmp5_) : NULL), (ClutterActor*) self->priv->workgroup2);
#line 101 "window-management.vala"
	clutter_actor_raise ((_tmp6_ = self->priv->workgroup1, CLUTTER_IS_ACTOR (_tmp6_) ? ((ClutterActor*) _tmp6_) : NULL), mutter_plugin_get_normal_window_group (unity_plugin_get_plugin (plugin)));
#line 102 "window-management.vala"
	clutter_actor_raise ((_tmp7_ = self->priv->workgroup2, CLUTTER_IS_ACTOR (_tmp7_) ? ((ClutterActor*) _tmp7_) : NULL), mutter_plugin_get_normal_window_group (unity_plugin_get_plugin (plugin)));
#line 371 "window-management.c"
	{
		GList* window_collection;
		GList* window_it;
#line 105 "window-management.vala"
		window_collection = windows;
#line 377 "window-management.c"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
			MutterWindow* window;
#line 105 "window-management.vala"
			window = (MutterWindow*) window_it->data;
#line 382 "window-management.c"
			{
				ClutterActor* clone;
#line 108 "window-management.vala"
				clone = (ClutterActor*) g_object_ref_sink ((ClutterClone*) clutter_clone_new ((ClutterActor*) window));
#line 109 "window-management.vala"
				self->priv->switch_windows = g_list_prepend (self->priv->switch_windows, _g_object_ref0 (clone));
#line 111 "window-management.vala"
				clutter_actor_set_position (clone, clutter_actor_get_x ((ClutterActor*) window), clutter_actor_get_y ((ClutterActor*) window));
#line 112 "window-management.vala"
				clutter_actor_set_size (clone, clutter_actor_get_width ((ClutterActor*) window), clutter_actor_get_height ((ClutterActor*) window));
#line 114 "window-management.vala"
				clutter_actor_set_opacity ((ClutterActor*) window, (guint8) 0);
#line 115 "window-management.vala"
				clutter_actor_set_opacity (clone, (guint8) 255);
#line 117 "window-management.vala"
				if (mutter_window_get_window_type (window) == META_COMP_WINDOW_DESKTOP) {
#line 399 "window-management.c"
					ClutterActor* _tmp8_;
#line 119 "window-management.vala"
					clutter_container_add_actor ((_tmp8_ = mutter_plugin_get_window_group (unity_plugin_get_plugin (plugin)), CLUTTER_IS_CONTAINER (_tmp8_) ? ((ClutterContainer*) _tmp8_) : NULL), clone);
#line 120 "window-management.vala"
					clutter_actor_raise (clone, mutter_plugin_get_normal_window_group (unity_plugin_get_plugin (plugin)));
#line 405 "window-management.c"
					_g_object_unref0 (clone);
#line 121 "window-management.vala"
					continue;
#line 409 "window-management.c"
				}
#line 125 "window-management.vala"
				if (mutter_window_get_workspace (window) == from) {
#line 127 "window-management.vala"
					clutter_container_add_actor ((ClutterContainer*) self->priv->workgroup1, clone);
#line 415 "window-management.c"
				} else {
#line 129 "window-management.vala"
					if (mutter_window_get_workspace (window) == to) {
#line 131 "window-management.vala"
						clutter_container_add_actor ((ClutterContainer*) self->priv->workgroup2, clone);
#line 421 "window-management.c"
					}
				}
				_g_object_unref0 (clone);
			}
		}
	}
#line 135 "window-management.vala"
	anim = (_tmp9_ = _g_object_ref0 (clutter_actor_animate ((ClutterActor*) self->priv->workgroup1, (gulong) CLUTTER_LINEAR, (guint) 150, "x", -x_delta, "y", -y_delta, NULL)), _g_object_unref0 (anim), _tmp9_);
#line 139 "window-management.vala"
	y = clutter_actor_get_y ((ClutterActor*) self->priv->workgroup2);
#line 140 "window-management.vala"
	x = clutter_actor_get_x ((ClutterActor*) self->priv->workgroup2);
#line 142 "window-management.vala"
	clutter_actor_set_x ((ClutterActor*) self->priv->workgroup2, x_delta);
#line 143 "window-management.vala"
	clutter_actor_set_y ((ClutterActor*) self->priv->workgroup2, y_delta);
#line 145 "window-management.vala"
	anim = (_tmp10_ = _g_object_ref0 (clutter_actor_animate ((ClutterActor*) self->priv->workgroup2, (gulong) CLUTTER_LINEAR, (guint) 150, "x", x, "y", y, NULL)), _g_object_unref0 (anim), _tmp10_);
#line 148 "window-management.vala"
	g_signal_connect_object (anim, "completed", (GCallback) _unity_window_management_on_workspace_switch_completed_clutter_animation_completed, self, 0);
#line 442 "window-management.c"
	_g_object_unref0 (anim);
}


#line 151 "window-management.vala"
static void unity_window_management_on_workspace_switch_completed (UnityWindowManagement* self, ClutterAnimation* anim) {
#line 449 "window-management.c"
	MutterWindow* window;
#line 151 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 153 "window-management.vala"
	window = NULL;
#line 455 "window-management.c"
	{
		GList* actor_collection;
		GList* actor_it;
#line 155 "window-management.vala"
		actor_collection = self->priv->switch_windows;
#line 461 "window-management.c"
		for (actor_it = actor_collection; actor_it != NULL; actor_it = actor_it->next) {
			ClutterActor* actor;
#line 155 "window-management.vala"
			actor = _g_object_ref0 ((ClutterActor*) actor_it->data);
#line 466 "window-management.c"
			{
				MutterWindow* _tmp2_;
				ClutterActor* _tmp0_;
				ClutterActor* _tmp1_;
#line 157 "window-management.vala"
				window = (_tmp2_ = _g_object_ref0 ((_tmp1_ = clutter_clone_get_source ((_tmp0_ = actor, CLUTTER_IS_CLONE (_tmp0_) ? ((ClutterClone*) _tmp0_) : NULL)), MUTTER_IS_WINDOW (_tmp1_) ? ((MutterWindow*) _tmp1_) : NULL)), _g_object_unref0 (window), _tmp2_);
#line 158 "window-management.vala"
				clutter_actor_set_opacity ((ClutterActor*) window, (guint8) 255);
#line 159 "window-management.vala"
				clutter_actor_destroy (actor);
#line 477 "window-management.c"
				_g_object_unref0 (actor);
			}
		}
	}
#line 162 "window-management.vala"
	clutter_actor_destroy ((ClutterActor*) self->priv->workgroup1);
#line 163 "window-management.vala"
	clutter_actor_destroy ((ClutterActor*) self->priv->workgroup2);
#line 165 "window-management.vala"
	mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_SWITCH_WORKSPACE);
#line 166 "window-management.vala"
	self->priv->switch_signals_to_send--;
#line 490 "window-management.c"
	_g_object_unref0 (window);
}


#line 169 "window-management.vala"
static void unity_window_management_window_maximized (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height) {
#line 169 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 169 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 169 "window-management.vala"
	g_return_if_fail (window != NULL);
#line 180 "window-management.vala"
	g_object_set_data_full ((GObject*) window, unity_maximus_user_unmaximize_hint, NULL, NULL);
#line 182 "window-management.vala"
	mutter_plugin_effect_completed (unity_plugin_get_plugin (plugin), window, (guint) MUTTER_PLUGIN_MAXIMIZE);
#line 507 "window-management.c"
}


#line 185 "window-management.vala"
static void unity_window_management_window_unmaximized (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window, gint x, gint y, gint width, gint height) {
#line 513 "window-management.c"
	gint i;
#line 185 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 185 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 185 "window-management.vala"
	g_return_if_fail (window != NULL);
#line 197 "window-management.vala"
	i = 1;
#line 198 "window-management.vala"
	g_object_set_data_full ((GObject*) window, unity_maximus_user_unmaximize_hint, GINT_TO_POINTER (i), NULL);
#line 200 "window-management.vala"
	mutter_plugin_effect_completed (unity_plugin_get_plugin (plugin), window, (guint) MUTTER_PLUGIN_UNMAXIMIZE);
#line 527 "window-management.c"
}


#line 242 "window-management.vala"
static void _unity_window_management_window_minimized_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self) {
#line 533 "window-management.c"
	unity_window_management_window_minimized_completed (self, _sender);
}


#line 203 "window-management.vala"
static void unity_window_management_window_minimized (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window) {
#line 540 "window-management.c"
	gint type;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	MetaRectangle _tmp3_ = {0};
	MetaRectangle rect;
	gint speed;
	ClutterAnimation* anim;
	MutterWindow* _tmp4_;
	ClutterActor* actor;
#line 203 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 203 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 203 "window-management.vala"
	g_return_if_fail (window != NULL);
#line 205 "window-management.vala"
	type = (gint) mutter_window_get_window_type (window);
#line 207 "window-management.vala"
	if (type != META_WINDOW_NORMAL) {
#line 208 "window-management.vala"
		_tmp2_ = type != META_WINDOW_DIALOG;
#line 563 "window-management.c"
	} else {
#line 207 "window-management.vala"
		_tmp2_ = FALSE;
#line 567 "window-management.c"
	}
#line 207 "window-management.vala"
	if (_tmp2_) {
#line 209 "window-management.vala"
		_tmp1_ = type != META_WINDOW_MODAL_DIALOG;
#line 573 "window-management.c"
	} else {
#line 207 "window-management.vala"
		_tmp1_ = FALSE;
#line 577 "window-management.c"
	}
#line 207 "window-management.vala"
	if (_tmp1_) {
#line 210 "window-management.vala"
		_tmp0_ = type != META_WINDOW_MENU;
#line 583 "window-management.c"
	} else {
#line 207 "window-management.vala"
		_tmp0_ = FALSE;
#line 587 "window-management.c"
	}
#line 207 "window-management.vala"
	if (_tmp0_) {
#line 213 "window-management.vala"
		mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_MINIMIZE);
#line 214 "window-management.vala"
		return;
#line 595 "window-management.c"
	}
#line 217 "window-management.vala"
	rect = (_tmp3_.height = 0, _tmp3_.width = 0, _tmp3_.x = 0, _tmp3_.y = 0, _tmp3_);
#line 219 "window-management.vala"
	speed = unity_window_management_get_animation_speed (self, window);
#line 220 "window-management.vala"
	anim = NULL;
#line 221 "window-management.vala"
	actor = _g_object_ref0 ((_tmp4_ = window, CLUTTER_IS_ACTOR (_tmp4_) ? ((ClutterActor*) _tmp4_) : NULL));
#line 222 "window-management.vala"
	if (meta_window_get_icon_geometry (mutter_window_get_meta_window (window), &rect)) {
#line 607 "window-management.c"
		float scale;
		ClutterAnimation* _tmp5_;
#line 224 "window-management.vala"
		scale = MIN (MIN ((float) 1, rect.width / clutter_actor_get_width (actor)), MIN ((float) 1, rect.height / clutter_actor_get_height (actor)));
#line 226 "window-management.vala"
		g_object_set ((GObject*) actor, "scale-gravity", CLUTTER_GRAVITY_CENTER, NULL);
#line 227 "window-management.vala"
		anim = (_tmp5_ = _g_object_ref0 (clutter_actor_animate (actor, (gulong) CLUTTER_EASE_IN_SINE, (guint) speed, "opacity", 0, "x", (float) ((rect.x + (rect.width / 2)) - (clutter_actor_get_width (actor) / 2)), "y", (float) ((rect.y + (rect.height / 2)) - (clutter_actor_get_height (actor) / 2)), "scale-x", scale, "scale-y", scale, NULL)), _g_object_unref0 (anim), _tmp5_);
#line 616 "window-management.c"
	} else {
		ClutterAnimation* _tmp6_;
#line 236 "window-management.vala"
		anim = (_tmp6_ = _g_object_ref0 (clutter_actor_animate (actor, (gulong) CLUTTER_EASE_IN_SINE, (guint) speed, "opacity", 0, NULL)), _g_object_unref0 (anim), _tmp6_);
#line 621 "window-management.c"
	}
#line 239 "window-management.vala"
	g_signal_connect_object (anim, "completed", (GCallback) _unity_window_management_window_minimized_completed_clutter_animation_completed, self, 0);
#line 625 "window-management.c"
	_g_object_unref0 (anim);
	_g_object_unref0 (actor);
}


#line 242 "window-management.vala"
static void unity_window_management_window_minimized_completed (UnityWindowManagement* self, ClutterAnimation* anim) {
#line 633 "window-management.c"
	GObject* _tmp0_;
	MutterWindow* window;
#line 242 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 242 "window-management.vala"
	g_return_if_fail (anim != NULL);
#line 244 "window-management.vala"
	window = (_tmp0_ = clutter_animation_get_object (anim), MUTTER_IS_WINDOW (_tmp0_) ? ((MutterWindow*) _tmp0_) : NULL);
#line 246 "window-management.vala"
	if (window == NULL) {
#line 247 "window-management.vala"
		return;
#line 646 "window-management.c"
	}
#line 249 "window-management.vala"
	clutter_actor_hide ((ClutterActor*) window);
#line 250 "window-management.vala"
	mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_MINIMIZE);
#line 652 "window-management.c"
}


#line 253 "window-management.vala"
static gboolean unity_window_management_force_activate (UnityWindowManagement* self) {
#line 658 "window-management.c"
	gboolean result = FALSE;
#line 253 "window-management.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 255 "window-management.vala"
	if (MUTTER_IS_WINDOW (self->priv->last_mapped)) {
#line 664 "window-management.c"
		MetaWindow* w;
		MetaDisplay* d;
#line 257 "window-management.vala"
		w = mutter_window_get_meta_window (self->priv->last_mapped);
#line 258 "window-management.vala"
		d = meta_window_get_display (w);
#line 260 "window-management.vala"
		meta_window_activate (mutter_window_get_meta_window (self->priv->last_mapped), meta_display_get_current_time (d));
#line 673 "window-management.c"
	}
	result = FALSE;
#line 264 "window-management.vala"
	return result;
#line 678 "window-management.c"
}


#line 253 "window-management.vala"
static gboolean _unity_window_management_force_activate_gsource_func (gpointer self) {
#line 684 "window-management.c"
	return unity_window_management_force_activate (self);
}


#line 323 "window-management.vala"
static void _unity_window_management_window_mapped_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self) {
#line 691 "window-management.c"
	unity_window_management_window_mapped_completed (self, _sender);
}


#line 267 "window-management.vala"
static void unity_window_management_window_mapped (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window) {
#line 698 "window-management.c"
	gint type;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	ClutterAnimation* anim;
	MutterWindow* _tmp4_;
	ClutterActor* actor;
	gint speed;
	gulong xid;
	WnckWindow* wnck_window;
	MetaRectangle _tmp5_ = {0};
	MetaRectangle rect;
	gboolean _tmp6_ = FALSE;
#line 267 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 267 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 267 "window-management.vala"
	g_return_if_fail (window != NULL);
#line 269 "window-management.vala"
	type = (gint) mutter_window_get_window_type (window);
#line 271 "window-management.vala"
	if (type != META_WINDOW_NORMAL) {
#line 272 "window-management.vala"
		_tmp2_ = type != META_WINDOW_DIALOG;
#line 725 "window-management.c"
	} else {
#line 271 "window-management.vala"
		_tmp2_ = FALSE;
#line 729 "window-management.c"
	}
#line 271 "window-management.vala"
	if (_tmp2_) {
#line 273 "window-management.vala"
		_tmp1_ = type != META_WINDOW_MODAL_DIALOG;
#line 735 "window-management.c"
	} else {
#line 271 "window-management.vala"
		_tmp1_ = FALSE;
#line 739 "window-management.c"
	}
#line 271 "window-management.vala"
	if (_tmp1_) {
#line 274 "window-management.vala"
		_tmp0_ = type != META_WINDOW_MENU;
#line 745 "window-management.c"
	} else {
#line 271 "window-management.vala"
		_tmp0_ = FALSE;
#line 749 "window-management.c"
	}
#line 271 "window-management.vala"
	if (_tmp0_) {
#line 277 "window-management.vala"
		mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_MAP);
#line 278 "window-management.vala"
		return;
#line 757 "window-management.c"
	}
#line 281 "window-management.vala"
	if (type == META_WINDOW_NORMAL) {
#line 281 "window-management.vala"
		_tmp3_ = TRUE;
#line 763 "window-management.c"
	} else {
#line 282 "window-management.vala"
		_tmp3_ = type == META_WINDOW_DIALOG;
#line 767 "window-management.c"
	}
#line 281 "window-management.vala"
	if (_tmp3_) {
#line 284 "window-management.vala"
		meta_window_activate (mutter_window_get_meta_window (window), meta_window_get_user_time (mutter_window_get_meta_window (window)));
#line 287 "window-management.vala"
		self->priv->last_mapped = window;
#line 288 "window-management.vala"
		g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _unity_window_management_force_activate_gsource_func, g_object_ref (self), g_object_unref);
#line 777 "window-management.c"
	}
#line 291 "window-management.vala"
	anim = NULL;
#line 292 "window-management.vala"
	actor = _g_object_ref0 ((_tmp4_ = window, CLUTTER_IS_ACTOR (_tmp4_) ? ((ClutterActor*) _tmp4_) : NULL));
#line 293 "window-management.vala"
	clutter_actor_set_opacity (actor, (guint8) 0);
#line 294 "window-management.vala"
	clutter_actor_show ((ClutterActor*) window);
#line 296 "window-management.vala"
	speed = unity_window_management_get_animation_speed (self, window);
#line 298 "window-management.vala"
	xid = (gulong) meta_window_get_xwindow (mutter_window_get_meta_window (window));
#line 299 "window-management.vala"
	wnck_window = _g_object_ref0 (wnck_window_get (xid));
#line 301 "window-management.vala"
	rect = (_tmp5_.height = 0, _tmp5_.width = 0, _tmp5_.x = 0, _tmp5_.y = 0, _tmp5_);
#line 302 "window-management.vala"
	if (WNCK_IS_WINDOW (wnck_window)) {
#line 303 "window-management.vala"
		_tmp6_ = meta_window_get_icon_geometry (mutter_window_get_meta_window (window), &rect);
#line 799 "window-management.c"
	} else {
#line 302 "window-management.vala"
		_tmp6_ = FALSE;
#line 803 "window-management.c"
	}
#line 302 "window-management.vala"
	if (_tmp6_) {
#line 807 "window-management.c"
		gint x = 0;
		gint y = 0;
		gint w = 0;
		gint h = 0;
		ClutterAnimation* _tmp7_;
#line 306 "window-management.vala"
		wnck_window_get_geometry (wnck_window, &x, &y, &w, &h);
#line 307 "window-management.vala"
		g_object_set ((GObject*) actor, "scale-gravity", CLUTTER_GRAVITY_CENTER, NULL);
#line 308 "window-management.vala"
		anim = (_tmp7_ = _g_object_ref0 (clutter_actor_animate (actor, (gulong) CLUTTER_EASE_IN_SINE, (guint) speed, "opacity", 255, "x", (float) x, "y", (float) y, "scale-x", 1.f, "scale-y", 1.f, NULL)), _g_object_unref0 (anim), _tmp7_);
#line 819 "window-management.c"
	} else {
		ClutterAnimation* _tmp8_;
#line 317 "window-management.vala"
		anim = (_tmp8_ = _g_object_ref0 (clutter_actor_animate (actor, (gulong) CLUTTER_EASE_IN_SINE, (guint) speed, "opacity", 255, NULL)), _g_object_unref0 (anim), _tmp8_);
#line 824 "window-management.c"
	}
#line 320 "window-management.vala"
	g_signal_connect_object (anim, "completed", (GCallback) _unity_window_management_window_mapped_completed_clutter_animation_completed, self, 0);
#line 828 "window-management.c"
	_g_object_unref0 (anim);
	_g_object_unref0 (actor);
	_g_object_unref0 (wnck_window);
}


#line 323 "window-management.vala"
static void unity_window_management_window_mapped_completed (UnityWindowManagement* self, ClutterAnimation* anim) {
#line 837 "window-management.c"
	GObject* _tmp0_;
	MutterWindow* window;
	MutterWindow* _tmp1_;
#line 323 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 323 "window-management.vala"
	g_return_if_fail (anim != NULL);
#line 325 "window-management.vala"
	window = (_tmp0_ = clutter_animation_get_object (anim), MUTTER_IS_WINDOW (_tmp0_) ? ((MutterWindow*) _tmp0_) : NULL);
#line 327 "window-management.vala"
	if (window == NULL) {
#line 328 "window-management.vala"
		return;
#line 851 "window-management.c"
	}
#line 330 "window-management.vala"
	clutter_actor_set_opacity ((_tmp1_ = window, CLUTTER_IS_ACTOR (_tmp1_) ? ((ClutterActor*) _tmp1_) : NULL), (guint8) 255);
#line 331 "window-management.vala"
	mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_MAP);
#line 857 "window-management.c"
}


#line 358 "window-management.vala"
static void _unity_window_management_window_destroyed_completed_clutter_animation_completed (ClutterAnimation* _sender, gpointer self) {
#line 863 "window-management.c"
	unity_window_management_window_destroyed_completed (self, _sender);
}


#line 334 "window-management.vala"
static void unity_window_management_window_destroyed (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window) {
#line 870 "window-management.c"
	gint type;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	ClutterAnimation* anim;
	gint speed;
	ClutterAnimation* _tmp3_;
#line 334 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 334 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 334 "window-management.vala"
	g_return_if_fail (window != NULL);
#line 336 "window-management.vala"
	type = (gint) mutter_window_get_window_type (window);
#line 338 "window-management.vala"
	if (type != META_WINDOW_NORMAL) {
#line 339 "window-management.vala"
		_tmp2_ = type != META_WINDOW_DIALOG;
#line 890 "window-management.c"
	} else {
#line 338 "window-management.vala"
		_tmp2_ = FALSE;
#line 894 "window-management.c"
	}
#line 338 "window-management.vala"
	if (_tmp2_) {
#line 340 "window-management.vala"
		_tmp1_ = type != META_WINDOW_MODAL_DIALOG;
#line 900 "window-management.c"
	} else {
#line 338 "window-management.vala"
		_tmp1_ = FALSE;
#line 904 "window-management.c"
	}
#line 338 "window-management.vala"
	if (_tmp1_) {
#line 341 "window-management.vala"
		_tmp0_ = type != META_WINDOW_MENU;
#line 910 "window-management.c"
	} else {
#line 338 "window-management.vala"
		_tmp0_ = FALSE;
#line 914 "window-management.c"
	}
#line 338 "window-management.vala"
	if (_tmp0_) {
#line 344 "window-management.vala"
		mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_DESTROY);
#line 345 "window-management.vala"
		return;
#line 922 "window-management.c"
	}
#line 348 "window-management.vala"
	anim = NULL;
#line 350 "window-management.vala"
	speed = unity_window_management_get_animation_speed (self, window);
#line 352 "window-management.vala"
	anim = (_tmp3_ = _g_object_ref0 (clutter_actor_animate ((ClutterActor*) window, (gulong) CLUTTER_EASE_IN_SINE, (guint) speed, "opacity", 0, NULL)), _g_object_unref0 (anim), _tmp3_);
#line 355 "window-management.vala"
	g_signal_connect_object (anim, "completed", (GCallback) _unity_window_management_window_destroyed_completed_clutter_animation_completed, self, 0);
#line 932 "window-management.c"
	_g_object_unref0 (anim);
}


#line 358 "window-management.vala"
static void unity_window_management_window_destroyed_completed (UnityWindowManagement* self, ClutterAnimation* anim) {
#line 939 "window-management.c"
	MutterWindow* window;
#line 358 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 358 "window-management.vala"
	g_return_if_fail (anim != NULL);
#line 360 "window-management.vala"
	window = MUTTER_WINDOW (clutter_animation_get_object (anim));
#line 362 "window-management.vala"
	mutter_plugin_effect_completed (unity_plugin_get_plugin (self->priv->plugin), window, (guint) MUTTER_PLUGIN_DESTROY);
#line 949 "window-management.c"
}


#line 365 "window-management.vala"
static void unity_window_management_window_kill_effect (UnityWindowManagement* self, UnityPlugin* plugin, MutterWindow* window, gulong events) {
#line 365 "window-management.vala"
	g_return_if_fail (self != NULL);
#line 365 "window-management.vala"
	g_return_if_fail (plugin != NULL);
#line 365 "window-management.vala"
	g_return_if_fail (window != NULL);
#line 961 "window-management.c"
}


static GObject * unity_window_management_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	UnityWindowManagement * self;
	parent_class = G_OBJECT_CLASS (unity_window_management_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = UNITY_WINDOW_MANAGEMENT (obj);
	{
	}
	return obj;
}


static void unity_window_management_class_init (UnityWindowManagementClass * klass) {
	unity_window_management_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (UnityWindowManagementPrivate));
	G_OBJECT_CLASS (klass)->constructor = unity_window_management_constructor;
	G_OBJECT_CLASS (klass)->finalize = unity_window_management_finalize;
}


static void unity_window_management_instance_init (UnityWindowManagement * self) {
	self->priv = UNITY_WINDOW_MANAGEMENT_GET_PRIVATE (self);
}


static void unity_window_management_finalize (GObject* obj) {
	UnityWindowManagement * self;
	self = UNITY_WINDOW_MANAGEMENT (obj);
	_g_object_unref0 (self->priv->plugin);
	__g_list_free_g_object_unref0 (self->priv->switch_windows);
	_g_object_unref0 (self->priv->workgroup1);
	_g_object_unref0 (self->priv->workgroup2);
	G_OBJECT_CLASS (unity_window_management_parent_class)->finalize (obj);
}


GType unity_window_management_get_type (void) {
	static volatile gsize unity_window_management_type_id__volatile = 0;
	if (g_once_init_enter (&unity_window_management_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (UnityWindowManagementClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) unity_window_management_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (UnityWindowManagement), 0, (GInstanceInitFunc) unity_window_management_instance_init, NULL };
		GType unity_window_management_type_id;
		unity_window_management_type_id = g_type_register_static (G_TYPE_OBJECT, "UnityWindowManagement", &g_define_type_info, 0);
		g_once_init_leave (&unity_window_management_type_id__volatile, unity_window_management_type_id);
	}
	return unity_window_management_type_id__volatile;
}




